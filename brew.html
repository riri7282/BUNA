<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Buna — BREW</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <main class="screen small">
    <header class="top">
      <h2 class="brand small">BUNA — BREWER</h2>
    </header>

    <section class="center">
      <div class="planet-brew" id="brewPlanet"></div>
      <div id="brewInfo" class="infoText">Prepare to brew — press READY when you begin</div>
      <button id="readyBtn" class="readyBtn">I AM READY</button>
    </section>

    <footer class="bottom">
      <div class="note">When you press READY, all participants will be notified.</div>
    </footer>
  </main>

  <script src="script.js"></script>
  <script>
    const chosen = JSON.parse(localStorage.getItem("bunaChosen") || "null");
    const myId = localStorage.getItem("bunaID");
    const brewPlanet = document.getElementById("brewPlanet");
    const readyBtn = document.getElementById("readyBtn");
    const brewInfo = document.getElementById("brewInfo");

    if (!chosen || chosen.id !== myId) {
      brewInfo.innerText = "You are not the chosen brewer for this session.";
      readyBtn.style.display = "none";
    } else {
      brewInfo.innerHTML = `You (${localStorage.getItem("bunaName")}) were chosen to brew. Press <strong>READY</strong> when you begin.`;
    }

    readyBtn.addEventListener("click", () => {
      localStorage.setItem("bunaBrewStarted", "true");
      localStorage.setItem("bunaBrewer", localStorage.getItem("bunaName") || chosen.name);
      readyBtn.innerText = "SENT — Waiting…";
      readyBtn.disabled = true;
      brewInfo.innerText = "Signal sent. The ritual has begun.";
      // small delay then go to status page
      setTimeout(()=> window.location.href = "status.html", 900);
    });
  </script>
</body>
</html>
